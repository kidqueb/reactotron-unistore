var t,e=(t=require("dlv"))&&"object"==typeof t&&"default"in t?t.default:t;function n(t=[],n={},a=[]){if(0===t.length)return a;for(let s=0,o=t.length;s<o;s++){const o=t[s],r=o.endsWith(".*")?o.replace(".*",""):o,c=["","*",".*","root","root.*"].indexOf(o)>-1?n:e(n,r);c&&a.push({path:o,value:c})}return a}module.exports=t=>e=>{const a=function(t,e){let a=[];const s=t.action((t,e)=>e);return{"state.values.subscribe":({payload:s})=>{if(a=s.paths,s.paths){const s=n(a,t.getState());e.stateValuesChange(s)}t.subscribe((t,s)=>{const o=s&&s.name||"Reactotron/DISPATCH",r=n(a,t);(function(t,e){try{return e?Promise.resolve(e()).then(function(e){const n=Object.keys(e);let a={};for(let e=0;e<n.length;e++){const s=n[e];a[s]=t[s]}return a}):Promise.resolve(!1)}catch(t){return Promise.reject(t)}})(t,s).then(t=>{t?e.stateActionComplete(o,t):e.display({name:"UNISTORE",preview:"store.setState",value:"Warning: The values of the action cannot be determined when store.setState is used to update state within an action. Think about returning an object instead.",important:!0}),e.stateValuesChange(r)})})},"state.action.dispatch":({payload:e})=>{t.setState(e.action)},"state.backup.request":()=>{const n=t.getState();e.stateBackupResponse(n)},"state.restore.request":({payload:t})=>{s(t.state)}}}(t,e);return{onCommand:t=>{const e=a[t.type];e&&e(t)}}};
//# sourceMappingURL=index.js.map
